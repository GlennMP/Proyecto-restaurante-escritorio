-- borra la bd si existe
DROP DATABASE IF EXISTS kalamar;
-- creamos la bd
CREATE DATABASE kalamar;
-- activamos la bd
USE kalamar;

CREATE TABLE CLIENTE (
DNI_CLIENTE CHAR(8) PRIMARY KEY,
NOMBRE_CLIENTE VARCHAR(50) UNIQUE NOT NULL, 
DIRECCION_CLIENTE VARCHAR(50) NOT NULL
);

insert into CLIENTE values ('77661566','GLENN ARTURO MEJIA PALACIOS','URB.MANUEL AREVALO ETAPA II');
insert into CLIENTE values ('12691556','DIEGO MARTIN SALAZAR GONZALES','URB.MANUEL AREVALO ETAPA I');
insert into CLIENTE values ('92681453','CONSUELO VANESSA PINGO TORRES','URB.MANUEL AREVALO ETAPA III');
insert into CLIENTE values ('19991756','CAROLINE GUADALUPE LOPEZ VAQUEZ','URB.MANUEL AREVALO ETAPA I');

CREATE TABLE CATEGORIA(
ID_CATEGORIA int auto_increment,
NOMBRE_CATEGORIA VARCHAR(50) UNIQUE NOT NULL,
primary key (ID_CATEGORIA)
);

INSERT INTO CATEGORIA VALUES(null,'Plato de carta');
INSERT INTO CATEGORIA VALUES(null,'Bebidas');
INSERT INTO CATEGORIA VALUES(null,'Insumos');
INSERT INTO CATEGORIA VALUES(null,'Productos de mantenimiento');

CREATE TABLE PROVEEDOR(
CODIGO_PROVEEDOR int auto_increment,
NOMBRE_PROVEEDOR VARCHAR (50) NOT NULL,
TELEFONO_PROVEEDOR CHAR(9) NOT NULL UNIQUE,
NOMBRE_EMPRESA VARCHAR (50) NOT NULL,
primary key (CODIGO_PROVEEDOR)
);

INSERT INTO PROVEEDOR VALUES(null,'ALISTHER ARRIOL OLAVARRIA','758432197','TODO LIMPIO');
INSERT INTO PROVEEDOR VALUES(null,'ARACELY LINARES CASTILLO','875043293','VERDURAS SELECTAS');
INSERT INTO PROVEEDOR VALUES(null,'TITO AVALOS PALACIOS','998574321','CARNICERIA TITOS');
INSERT INTO PROVEEDOR VALUES(null,'CARLOS CASTRO CHIROQUE','548398217','SELECION DEL MAR');
INSERT INTO PROVEEDOR VALUES(null,'CARO CABALLERO VELASQUEZ','875849321','BIO FORM');
INSERT INTO PROVEEDOR VALUES(null,'CARLOS AGURTO PALACIOS','968032915','EJEGROUP');

CREATE TABLE ALMACEN(
CODIGO_PRODUCTOALMECEN int auto_increment,
DESCRIPCION_PRODUCTOALMECEN VARCHAR(50) NOT NULL,
CANTIDAD_PRODUCTOALMECEN INT NOT NULL,
ID_CATEGORIA int,
PRECIO_PRODUCTOALMECEN DECIMAL(9,0) NOT NULL,
primary key (CODIGO_PRODUCTOALMECEN),
foreign key (ID_CATEGORIA) references CATEGORIA(ID_CATEGORIA)
);

INSERT INTO ALMACEN VALUES(null,'LOMO FINO POR KILO','10',1,'9');
INSERT INTO ALMACEN VALUES(null,'TOMATE POR KILO','7',1,'2');
INSERT INTO ALMACEN VALUES(null,'ARROZ POR KILO','12',1,'3');
INSERT INTO ALMACEN VALUES(null,'LECHUGA POR UNIDAD','7',1,'2');
INSERT INTO ALMACEN VALUES(null,'PESCADO OJO DE UVA POR KILO','6',1,'8');
INSERT INTO ALMACEN VALUES(null,'PECADO CHITA POR UNIDAD','5','1','6');
INSERT INTO ALMACEN VALUES(null,'MARICOS POR KILO','6','1','5');
INSERT INTO ALMACEN VALUES(null,'CANGRJO POR UNIDAD','7','1','3');
INSERT INTO ALMACEN VALUES(null,'FREGOL POR KILO','6','1','2');
INSERT INTO ALMACEN VALUES(null,'FIDEO POR KILO','8','1','3');
INSERT INTO ALMACEN VALUES(null,'ROCOTO POR KILO','4','1','1');
INSERT INTO ALMACEN VALUES(null,'LIMONES POR KILO','12','1','3');
INSERT INTO ALMACEN VALUES(null,'CULANTRO POR KILO','7','1','2');
INSERT INTO ALMACEN VALUES(null,'PAPA POR KILO','11','1','2');
INSERT INTO ALMACEN VALUES(null,'CABRITO POR KILO','6','1','7');
INSERT INTO ALMACEN VALUES(null,'PATO POR KILO','6','1','12');
INSERT INTO ALMACEN VALUES(null,'ESCABECHE POR KILO','12','1','2');
INSERT INTO ALMACEN VALUES(null,'TAPER CT3 POR UNIDA','32','3','1');
INSERT INTO ALMACEN VALUES(null,'PAPEL TOALLA POR UNIDA','11','3','3');
INSERT INTO ALMACEN VALUES(null,'AMBIENTADOR PINO POR UNIDA','4','4','4');
INSERT INTO ALMACEN VALUES(null,'PAPEL HIGIENICO POR UNIDA','6','4','2');
INSERT INTO ALMACEN VALUES(null,'COCA COLA PERSONAL POR UNIDAD','22','2','1');
INSERT INTO ALMACEN VALUES(null,'INKA COLA PERSONAL POR UNIDAD','20','2','1');
INSERT INTO ALMACEN VALUES(null,'COCA COLA 1LT POR UNIDAD','12','2','4');
INSERT INTO ALMACEN VALUES(null,'INKA COLA 1LT POR UNIDAD','10','2','4');
INSERT INTO ALMACEN VALUES(null,'PILSEN TRUJILLO POR UNIDAD','68','2','6');
INSERT INTO ALMACEN VALUES(null,'PILSEN CALLAO POR UNIDAD','42','2','7');
INSERT INTO ALMACEN VALUES(null,'CUSQUEÑA NEGRA POR UNIDAD','34','2','8');
INSERT INTO ALMACEN VALUES(null,'CUSQUEÑA TRIGO POR UNIDAD','28','2','8');
INSERT INTO ALMACEN VALUES(null,'CUSQUEÑA DORADA POR UNIDAD','30','2','8');
INSERT INTO ALMACEN VALUES(null,'CORONA EXTRA POR UNIDAD','33','2','5');
INSERT INTO ALMACEN VALUES(null,'AGUA SIN GAS POR UNIDAD','19','2','2');
INSERT INTO ALMACEN VALUES(null,'AGUA CON GAS POR UNIDAD','14','2','2');

CREATE TABLE CATEGORIA_PRODUCTOS_ALAMCEN(
CODIGO_PROVEEDOR int,
CODIGO_PRODUCTOALMECEN int,
NOMBRE_PRODUCTOALMECEN VARCHAR(50) NOT NULL,
foreign key (CODIGO_PROVEEDOR) references PROVEEDOR(CODIGO_PROVEEDOR),
foreign key (CODIGO_PRODUCTOALMECEN) references ALMACEN(CODIGO_PRODUCTOALMECEN)
);

ALTER TABLE CATEGORIA_PRODUCTOS_ALAMCEN
ADD PRIMARY KEY (CODIGO_PROVEEDOR,CODIGO_PRODUCTOALMECEN);

INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(1,20,'Productos de limpieza');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(1,21,'Productos de limpieza');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,2,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,3,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,4,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,9,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,10,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,11,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,13,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,14,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(2,17,'Abarrotes');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(3,1,'Carne');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(3,15,'Carne');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(3,16,'Carne');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(4,5,'Pescado');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(4,6,'Pescado');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(4,7,'Pescado');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(4,8,'Pescado');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(5,18,'Plasticos');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(5,19,'Plasticos');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,22,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,23,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,24,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,25,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,26,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,27,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,28,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,29,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,30,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,31,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,32,'Bebidas');
INSERT INTO CATEGORIA_PRODUCTOS_ALAMCEN VALUES(6,33,'Bebidas');

CREATE TABLE CARGO(
ID_CARGO int auto_increment,
NOMBRE_CARGO VARCHAR (20) NOT NULL UNIQUE,
primary key (ID_CARGO)
);

select NOMBRE_CARGO from CARGO order by ID_CARGO;

INSERT INTO CARGO VALUES (null,'Moso');
INSERT INTO CARGO VALUES (null,'administrador');

CREATE TABLE EMPLEADO(
CODIGO_EMPLEADO int auto_increment,
USUARIO varchar(6) NOT NULL ,
NOMBRE_EMPLEADO VARCHAR(50) NOT NULL UNIQUE,
CONTRASEÑA_EMPLEADO varchar(6) NOT NULL UNIQUE,
TELEFONO_EMPLEADO CHAR(9) NOT NULL UNIQUE,
DIRECCION_EMPLEADO VARCHAR (50),
ESTADO_EMPLEADO char(1),
ID_CARGO int,
primary key (CODIGO_EMPLEADO),
foreign key (ID_CARGO) references CARGO(ID_CARGO)
);

select * from EMPLEADO where USUARIO="mesero" and CONTRASEÑA_EMPLEADO="mesero" ;
select * from EMPLEADO;

INSERT INTO EMPLEADO VALUES (null,'alan','ALAN SALINAS VERA','alan','923443678','MANUEL AREVALO MZ-66 LT-43','a',1);
INSERT INTO EMPLEADO VALUES (null,'diego','DIEGO SALINAS VERA','diego','923553678','MANUEL AREVALO MZ-66 LT-43','a',1);
INSERT INTO EMPLEADO VALUES (null,'admin','PEDRO CASTILLO CHUQUILIN','admin','234536788','MANUEL AREVALO MZ-11 LT-64','a',1);

CREATE TABLE PRODUCTO(
CODIGO_PRODUCTO int not null AUTO_INCREMENT primary key,
NOMBRE_PRODUCTO varchar(50) NOT NULL,
DESCRIPCION_PRODUCTO VARCHAR(50) NOT NULL,
PRECIO_PRODUCTO DECIMAL(9,0) NOT NULL,
ID_CATEGORIA int,
foreign key (ID_CATEGORIA) references CATEGORIA(ID_CATEGORIA)
)AUTO_INCREMENT=312;

-- registro de la tabla producto
insert into PRODUCTO values (101,'Ceviche simple','p',30,'1');
insert into PRODUCTO values (102,'Ceviche mixto','p',35,'1');
insert into PRODUCTO values (103,'Chaufa de mariscos','p',40,'1');
insert into PRODUCTO values (104,'Tacu tacu con lomo saltado','p',40,'1');
insert into PRODUCTO values (105,'Arroz con pato','p',45,'1');
insert into PRODUCTO values (106,'Sudado de pescado','p',35,'1');
insert into PRODUCTO values (107,'Chicharron mixto','p',40,'1');
insert into PRODUCTO values (108,'Fettuccine a la huancaina con lomo','p',40,'1');
insert into PRODUCTO values (109,'Chicharron de pescado','p',35,'1');
insert into PRODUCTO values (110,'Milanesa de pollo','p',25,'1');
insert into PRODUCTO values (111,'Pato a la norteña','p',40,'1');
insert into PRODUCTO values (112,'Lomo saltado','p',40,'1');
insert into PRODUCTO values (113,'Cabrito a la norteña','p',35,'1');
insert into PRODUCTO values (114,'Parihuela','p',40,'1');
insert into PRODUCTO values (115,'Ceviche carretillero','p',30,'1');
insert into PRODUCTO values (116,'Arroz con mariscos','p',30,'1');
insert into PRODUCTO values (117,'Picante de mariscos','p',20,'1');
insert into PRODUCTO values (118,'Pescado frito','p',20,'1');
insert into PRODUCTO values (119,'Chicharron de pollo','p',30,'1');
insert into PRODUCTO values (120,'Pollo a la plancha','p',30,'1');
insert into PRODUCTO values (201,'Tequeños de Pollo','p',10,'1');
insert into PRODUCTO values (202,'Choclo al Comino','p',10,'1');
insert into PRODUCTO values (203,'Papa a la Huancaína','p',10,'1');
insert into PRODUCTO values (204,'Tartaletas de Ají de Gallina','p',10,'1');
insert into PRODUCTO values (205,'Chifles','p',10,'1');
insert into PRODUCTO values (206,'Chicharrón de Calamar','p',10,'1');
insert into PRODUCTO values (207,'Empanadas de Ají de Gallina','p',10,'1');
insert into PRODUCTO values (208,'Pulpo al olivo','p',10,'1');
insert into PRODUCTO values (301,'Coca cola personal','p',4,'2');
insert into PRODUCTO values (302,'Inka cola personal','p',4,'2');
insert into PRODUCTO values (303,'Coca cola 1LT','p',8,'2');
insert into PRODUCTO values (304,'Inka cola 1LT','p',8,'2');
insert into PRODUCTO values (305,'Pilsen trujillo','p',7,'2');
insert into PRODUCTO values (306,'Pilsen callao','p',7,'2');
insert into PRODUCTO values (307,'Cusqueña negra','p',9,'2');
insert into PRODUCTO values (308,'Cusqueña trigo','p',9,'2');
insert into PRODUCTO values (309,'Cusqueña dorada','p',9,'2');
insert into PRODUCTO values (310,'Corona extra','p',8,'2');
insert into PRODUCTO values (311,'Agua sin gas','p',2,'2');
insert into PRODUCTO values (312,'Agua con gas','p',2,'2');

CREATE TABLE PEDIDO(
NUMERO_PEDIDO INT PRIMARY KEY,
FECHA_PEDIDO DATETIME NOT NULL,
DNI_CLIENTE CHAR(8),
CODIGO_EMPLEADO int,
foreign key (DNI_CLIENTE) references CLIENTE(DNI_CLIENTE),
foreign key (CODIGO_EMPLEADO) references EMPLEADO(CODIGO_EMPLEADO)
);

select * from PEDIDO;

-- registro de la tabla pedido
insert into PEDIDO values (1001,'2020-01-14 19:32:55.863',92681453,1);
insert into PEDIDO values (1002,'2020-02-10 19:32:55.863',12691556,1);
insert into PEDIDO values (1003,'2020-02-01 19:32:55.863',77661566,1);
insert into PEDIDO values (1004,'2020-03-12 19:32:55.863',77661566,1);
insert into PEDIDO values (1005,'2020-04-25 19:32:55.863',19991756,1);
insert into PEDIDO values (1006,'2020-04-22 19:32:55.863',77661566,1);
insert into PEDIDO values (1007,'2020-04-16 19:32:55.863',12691556,1);
insert into PEDIDO values (1008,'2020-05-11 19:32:55.863',92681453,1);
insert into PEDIDO values (1009,'2020-06-18 19:32:55.863',19991756,1);
insert into PEDIDO values (1010,'2020-07-29 19:32:55.863',92681453,1);

CREATE TABLE DETALLE_PEDIDO(
NUMERO_PEDIDO INT,
CODIGO_PRODUCTO int,
PRECIO_PRODUCTO DECIMAL(9,0) NOT NULL,
CANTIDAD_PRODUCTO INT NOT NULL,
foreign key (NUMERO_PEDIDO) references PEDIDO(NUMERO_PEDIDO),
foreign key (CODIGO_PRODUCTO) references PRODUCTO(CODIGO_PRODUCTO)
);

ALTER TABLE DETALLE_PEDIDO
ADD PRIMARY KEY (NUMERO_PEDIDO,CODIGO_PRODUCTO);

CREATE TABLE mesas (
ID_MESAINT INT NOT NULL AUTO_INCREMENT primary key ,
NUMERO_MESA  INT NOT NULL ,
COD_PRODUCTO VARCHAR(4)NOT NULL, 
NOM_PRODUCTO VARCHAR(100)NOT NULL, 
PRECIO_PRODUCTO INT NOT NULL
);

select * from mesas;


CREATE TABLE VENTADIAS (
ID_VENTADELDIA int not null AUTO_INCREMENT primary key,
EMPLEADO_VENTADELDIA varchar(6) NOT NULL,
MESA_VENTADELDIA  INT NOT NULL ,
FECHA_VENTADELDIA varchar(15),
TOTAL_VENTADELDIA int NOT NULL
);

select * from VENTADIAS;


-- registro de la tabla detalle pedido
insert into DETALLE_PEDIDO values (1001,101,30,2);
insert into DETALLE_PEDIDO values (1001,110,25,1);
insert into DETALLE_PEDIDO values (1001,206,10,3);
insert into DETALLE_PEDIDO values (1001,107,40,2);
insert into DETALLE_PEDIDO values (1001,302,4,1);
insert into DETALLE_PEDIDO values (1002,102,35,1);
insert into DETALLE_PEDIDO values (1002,301,4,1);
insert into DETALLE_PEDIDO values (1003,105,45,2);
insert into DETALLE_PEDIDO values (1003,203,10,4);
insert into DETALLE_PEDIDO values (1003,114,40,4);
insert into DETALLE_PEDIDO values (1004,104,40,2);
insert into DETALLE_PEDIDO values (1004,302,4,2);
insert into DETALLE_PEDIDO values (1005,106,35,3);
insert into DETALLE_PEDIDO values (1006,103,40,1);
insert into DETALLE_PEDIDO values (1006,101,30,1);
insert into DETALLE_PEDIDO values (1006,301,4,6);
insert into DETALLE_PEDIDO values (1007,117,25,3);
insert into DETALLE_PEDIDO values (1008,110,25,1);
insert into DETALLE_PEDIDO values (1009,102,30,3);
insert into DETALLE_PEDIDO values (1009,302,4,6);
insert into DETALLE_PEDIDO values (1009,114,40,2);
insert into DETALLE_PEDIDO values (1010,112,40,1);
insert into DETALLE_PEDIDO values (1010,301,4,1);


-- actualizar
update EMPLEADO set USUARIO="alaaan", NOMBRE_EMPLEADO="ALAN SALINAS VERA",CONTRASEÑA_EMPLEADO="alan",TELEFONO_EMPLEADO="777777777", DIRECCION_EMPLEADO="la esperanza", ID_CARGO="1" where CODIGO_EMPLEADO=1;

-- filtrado por nombre
select d.CODIGO_EMPLEADO,d.USUARIO,d.NOMBRE_EMPLEADO,d.CONTRASEÑA_EMPLEADO,d.TELEFONO_EMPLEADO,d.DIRECCION_EMPLEADO,v.NOMBRE_CARGO from EMPLEADO d 
join CARGO v on d.ID_CARGO=v.ID_CARGO where NOMBRE_EMPLEADO like 'A%';
